# service-setting

è®¾ç½®æœåŠ¡å±‚ï¼Œæä¾›ç®€æ´çš„é…ç½®ç®¡ç†æ¥å£ã€‚

## ğŸ§… ç¬¬ä¸€å±‚ï¼šåœ¨ Service ä¸­çš„ä½ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          burncloud-service                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        æœåŠ¡å±‚                                       â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚   â”‚   â”‚ service-monitor â”‚  â”‚ service-user    â”‚  â”‚â˜…service-setting â”‚    â”‚    â”‚
â”‚   â”‚   â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚    â”‚    â”‚
â”‚   â”‚   â”‚ CPU ç›‘æ§        â”‚  â”‚ æ³¨å†Œç™»å½•        â”‚  â”‚ é…ç½®ç®¡ç†        â”‚    â”‚    â”‚
â”‚   â”‚   â”‚ å†…å­˜ç›‘æ§        â”‚  â”‚ JWT Token       â”‚  â”‚ é”®å€¼å­˜å‚¨        â”‚    â”‚    â”‚
â”‚   â”‚   â”‚ ç£ç›˜ç›‘æ§        â”‚  â”‚ å¯†ç å“ˆå¸Œ        â”‚  â”‚ ç³»ç»Ÿè®¾ç½®        â”‚    â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚   â”‚                                                                     â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

service-setting çš„èŒè´£:
â”œâ”€â”€ å°è£… database-setting
â”œâ”€â”€ æä¾›ç®€æ´çš„é…ç½® API
â”œâ”€â”€ ç³»ç»Ÿè®¾ç½®ç®¡ç†
â””â”€â”€ è¢«å…¶ä»–æœåŠ¡ä¾èµ–
```

## ğŸ§… ç¬¬äºŒå±‚ï¼šæ–‡ä»¶ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       service-setting æ–‡ä»¶ç»“æ„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  crates/service/crates/service-setting/                                      â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ Cargo.toml           # ä¾èµ–é…ç½®                                        â”‚
â”‚  â””â”€â”€ src/                                                                    â”‚
â”‚      â””â”€â”€ lib.rs           # è®¾ç½®æœåŠ¡å®ç°                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§… ç¬¬ä¸‰å±‚ï¼šlib.rs è¯¦è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              lib.rs                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  æ¨¡å—èŒè´£: å°è£… database-settingï¼Œæä¾›ç®€æ´çš„æœåŠ¡å±‚æ¥å£                       â”‚
â”‚                                                                              â”‚
â”‚  /// è®¾ç½®æœåŠ¡                                                                â”‚
â”‚  pub struct SettingService {                                                 â”‚
â”‚      db: SettingDatabase,          // åº•å±‚æ•°æ®åº“è®¿é—®                        â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  impl SettingService {                                                       â”‚
â”‚      /// åˆ›å»ºæ–°çš„è®¾ç½®æœåŠ¡å®ä¾‹                                                â”‚
â”‚      pub async fn new() -> Result<Self>                                      â”‚
â”‚                                                                              â”‚
â”‚      /// è®¾ç½®é…ç½®é¡¹ï¼ˆæ·»åŠ æˆ–æ›´æ–°ï¼‰                                            â”‚
â”‚      pub async fn set(&self, name: &str, value: &str) -> Result<()>          â”‚
â”‚                                                                              â”‚
â”‚      /// è·å–é…ç½®å€¼                                                          â”‚
â”‚      pub async fn get(&self, name: &str) -> Result<Option<String>>           â”‚
â”‚                                                                              â”‚
â”‚      /// åˆ é™¤é…ç½®é¡¹                                                          â”‚
â”‚      pub async fn delete(&self, name: &str) -> Result<()>                    â”‚
â”‚                                                                              â”‚
â”‚      /// è·å–æ‰€æœ‰é…ç½®é¡¹                                                      â”‚
â”‚      pub async fn list_all(&self) -> Result<Vec<Setting>>                    â”‚
â”‚                                                                              â”‚
â”‚      /// å…³é—­æœåŠ¡                                                            â”‚
â”‚      pub async fn close(self) -> Result<()>                                  â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  // é‡å¯¼å‡ºå¸¸ç”¨ç±»å‹                                                           â”‚
â”‚  pub use burncloud_database_setting::{DatabaseError, Setting};               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§… ç¬¬å››å±‚ï¼šæœåŠ¡å±‚æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æœåŠ¡å±‚æ¨¡å¼                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ä¸ºä»€ä¹ˆéœ€è¦ service-setting?                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚                                                                              â”‚
â”‚  database-setting (æ•°æ®è®¿é—®å±‚)                                               â”‚
â”‚  â”œâ”€â”€ ç›´æ¥æ“ä½œæ•°æ®åº“                                                         â”‚
â”‚  â”œâ”€â”€ å…³æ³¨ SQL å’Œæ•°æ®æŒä¹…åŒ–                                                  â”‚
â”‚  â””â”€â”€ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘                                                         â”‚
â”‚                                                                              â”‚
â”‚           â–¼                                                                  â”‚
â”‚                                                                              â”‚
â”‚  service-setting (æœåŠ¡å±‚)                                                    â”‚
â”‚  â”œâ”€â”€ å°è£…æ•°æ®è®¿é—®å±‚                                                         â”‚
â”‚  â”œâ”€â”€ å¯æ·»åŠ ç¼“å­˜ã€éªŒè¯ç­‰ä¸šåŠ¡é€»è¾‘                                             â”‚
â”‚  â””â”€â”€ æä¾›ç»Ÿä¸€çš„ API ç»™å…¶ä»–æœåŠ¡ä½¿ç”¨                                          â”‚
â”‚                                                                              â”‚
â”‚  å½“å‰å®ç°:                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  service-setting åŸºæœ¬ç›´æ¥ä»£ç† database-setting                      â”‚   â”‚
â”‚  â”‚  æœªæ¥å¯æ‰©å±•:                                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æ·»åŠ å†…å­˜ç¼“å­˜ (å¦‚ LRU Cache)                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æ·»åŠ é…ç½®éªŒè¯é€»è¾‘                                               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æ·»åŠ é…ç½®å˜æ›´é€šçŸ¥                                               â”‚   â”‚
â”‚  â”‚  â””â”€â”€ æ·»åŠ é…ç½®åŠ å¯†å­˜å‚¨                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§… ç¬¬äº”å±‚ï¼šè¢«ä¾èµ–çš„æœåŠ¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          è¢«ä¾èµ–çš„æœåŠ¡                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  SettingService è¢«ä»¥ä¸‹æœåŠ¡ä½¿ç”¨:                                              â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  service-models                                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ get_huggingface_host() è¯»å– "huggingface" é…ç½®                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€ get_data_dir() è¯»å– "dir_data" é…ç½®                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  service-ip                                                         â”‚   â”‚
â”‚  â”‚  â””â”€â”€ get_location() è¯»å–/å†™å…¥ "location" é…ç½®                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  å…¶ä»–æœåŠ¡                                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ è¯»å–ä¸»é¢˜è®¾ç½® "theme"                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ è¯»å–è¯­è¨€è®¾ç½® "language"                                        â”‚   â”‚
â”‚  â”‚  â””â”€â”€ è¯»å–å…¶ä»–è¿è¡Œæ—¶é…ç½®                                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§… ä¾èµ–å…³ç³»

```
service-setting
â”œâ”€â”€ burncloud-database-setting
â”‚   â””â”€â”€ SettingDatabase
â””â”€â”€ (æ— å…¶ä»–å¤–éƒ¨ä¾èµ–)
```
